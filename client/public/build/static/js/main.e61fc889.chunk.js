(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{15:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(18),c=n.n(r),i=n(4),o=n(10),l=n(6),u=n(3),j=(n(15),n(0));var d=function(e){var t=e.setUser,n=Object(a.useState)({username:"",password:""}),s=Object(i.a)(n,2),r=s[0],c=s[1],d=Object(a.useState)(null),b=Object(i.a)(d,2),p=b[0],h=b[1];function m(e,t){c(Object(l.a)(Object(l.a)({},r),{},Object(o.a)({},t,e.target.value)))}return Object(j.jsx)("div",{className:"mx-auto",style:{width:"25%",textAlign:"center"},children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){e.ok?e.json().then((function(e){h(null),t(e),window.history.back()})):e.json().then((function(e){h(e),c({username:r.username,password:""})}))}))},className:"align-items-center",children:[Object(j.jsx)("br",{}),Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("span",{className:"input-group-text","aria-label":"Username",children:"Username:"}),Object(j.jsx)("input",{type:"text",placeholder:"Username",value:r.username,onChange:function(e){return m(e,"username")},className:"form-control","aria-label":"Username","aria-describedby":"inputGroup-sizing-default",required:!0}),Object(j.jsx)("br",{})]}),Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("span",{className:"input-group-text","aria-label":"Password",children:"Password:"}),Object(j.jsx)("input",{type:"password",placeholder:"Password",value:r.password,onChange:function(e){return m(e,"password")},className:"form-control","aria-label":"Password","aria-describedby":"inputGroup-sizing-default",required:!0}),Object(j.jsx)("br",{})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-light",children:"Login"}),Object(j.jsx)("br",{}),p?Object(j.jsxs)("div",{className:"alert alert-danger",children:[p.error,Object(j.jsx)("br",{})]}):null,Object(j.jsx)(u.b,{to:"/signup",children:"Don't have an account? Sign up"})]})})};var b=function(e){var t=e.setUser,n=Object(a.useState)({name:"",birthdate:"",username:"",email:"",password:"",password_confirmation:""}),s=Object(i.a)(n,2),r=s[0],c=s[1],d=Object(a.useState)({errors:[]}),b=Object(i.a)(d,2),p=b[0],h=b[1],m=p.errors.map((function(e){return Object(j.jsxs)("div",{className:"alert alert-danger",children:["- ",e]},e)}));function O(e,t){c(Object(l.a)(Object(l.a)({},r),{},Object(o.a)({},t,e.target.value)))}return Object(j.jsxs)("div",{className:"mx-auto",style:{width:"50%",textAlign:"center"},children:[Object(j.jsx)("br",{}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){e.ok?e.json().then((function(e){console.log(e),t(e),window.history.go(-2)})):e.json().then((function(e){h(e),c(Object(l.a)(Object(l.a)({},r),{},{password:"",password_confirmation:""}))}))}))},className:"align-items-center",children:[Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("span",{className:"input-group-text","aria-label":"Name",children:"Name:"}),Object(j.jsx)("input",{type:"text",placeholder:"Full Name",value:r.name,onChange:function(e){return O(e,"name")},className:"form-control","aria-label":"Name","aria-describedby":"inputGroup-sizing-default",required:!0}),Object(j.jsx)("br",{})]}),Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("span",{className:"input-group-text","aria-label":"Birthday",children:"Birthday:"}),Object(j.jsx)("input",{type:"date",value:r.birthdate,onChange:function(e){return O(e,"birthdate")},className:"form-control","aria-label":"Birthday","aria-describedby":"inputGroup-sizing-default",required:!0}),Object(j.jsx)("br",{})]}),Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("span",{className:"input-group-text","aria-label":"Email",children:"Email:"}),Object(j.jsx)("input",{type:"email",placeholder:"Email",value:r.email,onChange:function(e){return O(e,"email")},className:"form-control","aria-label":"Email","aria-describedby":"inputGroup-sizing-default",required:!0}),Object(j.jsx)("br",{})]}),Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("span",{className:"input-group-text","aria-label":"Username",children:"Username:"}),Object(j.jsx)("input",{type:"text",placeholder:"Username",value:r.username,onChange:function(e){return O(e,"username")},className:"form-control","aria-label":"Username","aria-describedby":"inputGroup-sizing-default",required:!0}),Object(j.jsx)("br",{})]}),Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("span",{className:"input-group-text","aria-label":"Password",children:"Password:"}),Object(j.jsx)("input",{type:"password",placeholder:"Password",value:r.password,onChange:function(e){return O(e,"password")},autoComplete:"new-password",className:"form-control","aria-label":"Password","aria-describedby":"inputGroup-sizing-default",required:!0}),Object(j.jsx)("br",{})]}),Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("span",{className:"input-group-text","aria-label":"Repeat_password",children:"Repeat Password:"}),Object(j.jsx)("input",{type:"password",placeholder:"Repeat Password",value:r.password_confirmation,onChange:function(e){return O(e,"password_confirmation")},"auto-complete":"new-password",className:"form-control","aria-label":"Repeat_password","aria-describedby":"inputGroup-sizing-default",required:!0}),Object(j.jsx)("br",{})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-light",children:"Sign Up"}),Object(j.jsx)("br",{}),p.errors.length>0?m:null,Object(j.jsx)(u.b,{to:"/login",children:"Already have an account? Login"})]})]})},p=n(2);function h(e){return e.toFixed(Math.max(((e+"").split(".")[1]||"").length,2))}var m=function(e){var t=e.products.map((function(e){return Object(j.jsxs)("div",{className:"border d-flex flex-row mb-3",children:[Object(j.jsx)("div",{style:{width:"max-content",minWidth:"20%"},className:"p-2",children:Object(j.jsx)("img",{src:e.image_url,style:{maxHeight:"100px"}})}),Object(j.jsxs)("div",{className:"p-2",children:[Object(j.jsxs)(u.b,{style:{color:"#3a4187",padding:"5px"},className:"text-uppercase",to:"/products/".concat(e.id),children:[e.name," - $",h(e.price)]}),Object(j.jsx)("p",{style:{padding:"5px"},children:e.description})]})]},e.id)}));return Object(j.jsx)("div",{className:"mx-auto",style:{width:"50%"},children:t})};var O=function(e){var t=e.onSearchSubmit,n=e.user,s=Object(a.useState)(""),r=Object(i.a)(s,2),c=r[0],o=r[1],l=Object(p.f)();return Object(j.jsxs)("div",{className:"nav justify-content-center bg-light ",children:[Object(j.jsx)(u.b,{to:"/",className:"nav-link btn btn-light",children:"Home"}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(c),o(""),l.push("/")},role:"search",className:"d-flex align-self-center",children:[Object(j.jsx)("input",{type:"text",value:c,onChange:function(e){return o(e.target.value)},placeholder:"Search",className:" h-100 form-control me-2"}),Object(j.jsx)("button",{type:"submit",className:"btn btn-light h-100 me-3",children:"Search"})]}),n?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{className:"nav-link dropdown-toggle btn-light px-1 my-0 text-capitalize",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:n.name}),Object(j.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton",children:[Object(j.jsx)(u.b,{to:"/".concat(n.username,"/about"),children:"Profile"}),Object(j.jsx)("br",{}),Object(j.jsxs)(u.b,{to:"/cart",children:["My Cart ",n.cart.cart.length>0?"(".concat(n.cart.cart.length,")"):null]}),Object(j.jsx)("br",{}),Object(j.jsx)(u.b,{to:"/logout",children:"Logout"})]})]}):Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(u.b,{to:"/login",className:"nav-link btn btn-light",children:"Login"})})]})};var x=function(e){var t=e.user,n=e.setUser;if(!t)return Object(j.jsx)(j.Fragment,{});if(0===t.cart.cart.length)return Object(j.jsxs)("h3",{className:"text-capitalize",style:{textAlign:"center",padding:"10px"},children:["Hi ",t.name,", You're cart is empty."]});var a=t.cart.cart.map((function(e){return Object(j.jsxs)("div",{children:[Object(j.jsxs)(u.b,{style:{color:"#3a4187",padding:"5px"},className:"text-uppercase",to:"/products/".concat(e.product.id),children:[e.product.name," - $",h(e.product.price)]})," ",Object(j.jsxs)("p",{children:[e.product.description,Object(j.jsx)("button",{className:"btn btn-light",onClick:function(){return t=e.id,console.log(t),void fetch("/removefromcart/".concat(t),{method:"DELETE"}).then((function(e){return e.json()})).then(n);var t},children:"Remove From Cart"})]})]},e.id)}));return Object(j.jsxs)("div",{className:"mx-auto",style:{textAlign:"center",width:"75%"},children:[a,Object(j.jsxs)("h5",{children:["Cart total: $",h(t.cart.total)]})]})};var f=function(e){var t=e.review;return Object(j.jsx)("div",{style:{textAlign:"center"},children:Object(j.jsxs)("p",{children:[t.rating,"/5 stars - ",t.description]})})};var g=function(e){var t=e.user,n=e.setUser,s=Object(a.useState)(!1),r=Object(i.a)(s,2),c=r[0],u=r[1],d=Object(a.useState)(null),b=Object(i.a)(d,2),m=b[0],O=b[1],x=Object(a.useState)({rating:"",description:""}),g=Object(i.a)(x,2),v=g[0],w=g[1],N=Object(a.useState)(!1),y=Object(i.a)(N,2),S=y[0],C=y[1],P=Object(p.f)(),U=Object(p.g)().id;function E(e,t){w(Object(l.a)(Object(l.a)({},v),{},Object(o.a)({},t,e.target.value)))}if(Object(a.useEffect)((function(){fetch("/products/".concat(U)).then((function(e){return e.json()})).then((function(e){O(e),w(Object(l.a)(Object(l.a)({},v),{},{product_id:e.id}))}))}),[]),!m)return Object(j.jsx)(j.Fragment,{});var _=m.reviews.map((function(e){return Object(j.jsx)(f,{review:e},e.id)}));return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"d-flex flex-row mb-3",children:[Object(j.jsx)("div",{style:{width:"20%"},children:Object(j.jsx)("img",{src:m.image_url,alt:m.name,style:{width:"100%",maxWidth:"300px"}})}),Object(j.jsxs)("div",{style:{width:"50%"},children:[Object(j.jsxs)("h4",{children:[m.name," - $",h(m.price)]}),Object(j.jsx)("p",{children:m.description})]})]}),Object(j.jsxs)("div",{style:{textAlign:"center"},children:[Object(j.jsxs)("button",{onClick:function(){t?(C(!0),fetch("/addtocart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:U})}).then((function(e){return e.json()})).then((function(e){n(e)}))):P.push("/login")},className:"btn btn-light",children:["Add to cart ",Object(j.jsx)("i",{className:"bi bi-cart-plus"})]}),Object(j.jsx)("br",{})]}),S?Object(j.jsxs)("div",{className:"alert alert-success mx-auto",role:"alert",style:{width:"max-content",textAlign:"center"},children:["Item added to cart ",Object(j.jsx)("button",{onClick:function(){return C(!1)},className:"btn btn-light",children:"X"})]}):null,_,t?Object(j.jsx)("div",{style:{textAlign:"center"},children:Object(j.jsx)("button",{onClick:function(){return u(!c)},className:"btn btn-light",children:"New Review"})}):null,c?Object(j.jsx)("div",{style:{width:"50%",textAlign:"center"},className:"mx-auto",children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}).then((function(e){return e.json()})).then((function(e){var t=m.reviews;t.push({id:e.id,description:e.description,rating:e.rating}),O(Object(l.a)(Object(l.a)({},m),{},{reviews:t})),w({rating:"",description:""})}))},className:"align-items-center",children:[Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("span",{className:"input-group-text","aria-label":"Rating",children:"Rating:"}),Object(j.jsx)("input",{type:"number",max:"5",min:"1",value:v.rating,onChange:function(e){return E(e,"rating")},className:"form-control","aria-label":"Rating","aria-describedby":"inputGroup-sizing-default",required:!0}),"/5 stars",Object(j.jsx)("br",{})]}),Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("span",{className:"input-group-text","aria-label":"Review",children:"Review:"}),Object(j.jsx)("input",{type:"text",value:v.description,onChange:function(e){return E(e,"description")},className:"form-control","aria-label":"Review","aria-describedby":"inputGroup-sizing-default",required:!0}),Object(j.jsx)("br",{})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-light",children:"Submit"})]})}):null]})};var v=function(e){var t=e.user,n=e.setUser;return t?Object(j.jsxs)("div",{style:{textAlign:"center"},children:[Object(j.jsxs)("h3",{className:"text-capitalize",children:["Profile for ",t.name]}),Object(j.jsxs)("h4",{children:["Username: ",t.username]}),Object(j.jsxs)("h4",{children:["Email: ",t.email]}),Object(j.jsxs)("h4",{children:["Birthday: ",t.birthdate]}),Object(j.jsx)(u.b,{to:"/".concat(t.username,"/about/password/change"),children:"Change password"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:function(){window.confirm("Are you sure you want to delete your account?")&&fetch("/users/".concat(t.id),{method:"DELETE"}).then((function(e){return e.json()})).then((function(){return n(null)}))},className:"btn btn-light",children:"Delete Account"})]}):Object(j.jsx)(j.Fragment,{})};var w=function(e){var t=e.setUser,n=Object(p.f)();return fetch("/logout",{method:"DELETE"}).then((function(e){return e.json()})).then((function(){t(null),n.push("/")})),Object(j.jsx)(j.Fragment,{})};var N=function(e){var t=e.user,n=e.setUser,s=Object(a.useState)({old_password:"",password:"",password_confirmation:""}),r=Object(i.a)(s,2),c=r[0],u=r[1],d=Object(p.f)(),b=Object(a.useState)({errors:[]}),h=Object(i.a)(b,2),m=h[0],O=h[1];if(!t)return Object(j.jsx)(j.Fragment,{});function x(e,t){u(Object(l.a)(Object(l.a)({},c),{},Object(o.a)({},t,e.target.value)))}var f=m.errors.map((function(e){return Object(j.jsxs)("div",{className:"alert alert-danger",children:["- ",e]},e)}));return Object(j.jsxs)("div",{className:"mx-auto",style:{width:"30%",textAlign:"center"},children:[Object(j.jsx)("br",{}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/changepassword",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){e.ok?e.json().then((function(e){n(e),O({errors:[]}),d.push("/".concat(e.username,"/about")),alert("Password changed successfully")})):e.json().then((function(e){O(e),u({old_password:"",password:"",password_confirmation:""})}))}))},className:"align-items-center",children:[Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("span",{className:"input-group-text","aria-label":"Old Password",children:"Old Password:"}),Object(j.jsx)("input",{type:"password",className:"form-control","aria-label":"Old Password","aria-describedby":"inputGroup-sizing-default",value:c.old_password,onChange:function(e){return x(e,"old_password")}})]}),Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("span",{className:"input-group-text","aria-label":"New Password",children:"New Password:"}),Object(j.jsx)("input",{type:"password",className:"form-control","aria-label":"New Password","aria-describedby":"inputGroup-sizing-default",value:c.password,onChange:function(e){return x(e,"password")}})]}),Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("span",{className:"input-group-text","aria-label":"Confirm New Password",children:"Confirm New Password:"}),Object(j.jsx)("input",{type:"password",className:"form-control","aria-label":"Confirm New Password","aria-describedby":"inputGroup-sizing-default",value:c.password_confirmation,onChange:function(e){return x(e,"password_confirmation")}}),Object(j.jsx)("br",{})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-light",children:"Update"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),m.errors.length>0?f:null]})]})};var y=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)([]),c=Object(i.a)(r,2),o=c[0],l=c[1],h=Object(a.useState)(""),f=Object(i.a)(h,2),y=f[0],S=f[1];Object(a.useEffect)((function(){fetch("/me").then((function(e){e.ok&&e.json().then(s)}))}),[]),console.log(n),Object(a.useEffect)((function(){fetch("/products").then((function(e){return e.json()})).then(l)}),[]);var C=o.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())}));return Object(j.jsxs)(u.a,{children:[Object(j.jsx)(O,{user:n,onSearchSubmit:function(e){S(e)}}),Object(j.jsxs)(p.c,{children:[Object(j.jsx)(p.a,{exact:!0,path:"/",children:Object(j.jsx)(m,{products:C,setProducts:l})}),Object(j.jsx)(p.a,{path:"/login",children:Object(j.jsx)(d,{setUser:s})}),Object(j.jsx)(p.a,{path:"/signup",children:Object(j.jsx)(b,{setUser:s})}),Object(j.jsx)(p.a,{path:"/cart",children:Object(j.jsx)(x,{user:n,setUser:s})}),Object(j.jsx)(p.a,{path:"/products/:id",children:Object(j.jsx)(g,{user:n,setUser:s})}),Object(j.jsx)(p.a,{exact:!0,path:"/:username/about",children:Object(j.jsx)(v,{user:n,setUser:s})}),Object(j.jsx)(p.a,{path:"/logout",children:Object(j.jsx)(w,{setUser:s})}),Object(j.jsx)(p.a,{path:"/:username/about/password/change",children:Object(j.jsx)(N,{user:n,setUser:s})}),Object(j.jsx)(p.a,{path:"/",children:"404 NOT FOUND"})]})]})};c.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(y,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.e61fc889.chunk.js.map